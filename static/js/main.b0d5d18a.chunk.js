(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(25),r=n(8),a=n(3),s=n(0),i=n(10),l=n.n(i),o=n(1),j=function(e){var t=e.isActive;return l()("navbar-item",{"has-background-grey-lighter":t})},d=function(){return Object(o.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"navbar-brand",children:[Object(o.jsx)(r.c,{className:j,to:"/",children:"Home"}),Object(o.jsx)(r.c,{className:j,to:"people",children:"People"})]})})})},b=(n(36),function(){return Object(o.jsxs)("div",{"data-cy":"app",children:[Object(o.jsx)(d,{}),Object(o.jsx)("div",{className:"section",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(a.b,{})})})]})}),u=function(){return Object(o.jsx)("h1",{className:"title",children:"Home Page"})},h=n(26),O=n(5),x=n(4),m=n(7),f="https://mate-academy.github.io/react_people-table/api/people.json";function p(e){return new Promise((function(t){return setTimeout(t,e)}))}function v(){return(v=Object(m.a)(Object(x.a)().mark((function e(){return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(500).then((function(){return fetch(f)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(37);var N=function(){return Object(o.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(o.jsx)("div",{className:"Loader__content"})})},g=n(9);function y(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(O.a)(e,2),c=t[0],r=t[1];null===r?n.delete(c):Array.isArray(r)?(n.delete(c),r.forEach((function(e){n.append(c,e)}))):n.set(c,r)})),n.toString()}var w=function(e){return e.All="",e.Male="m",e.Female="f",e}({}),k=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),S=function(e){return e.Sex="sex",e.Query="query",e.Centuries="centuries",e.Sort="sort",e.Order="order",e}({}),L=[16,17,18,19,20],C=function(){var e=Object(r.d)(),t=Object(O.a)(e,2),n=t[0],c=t[1],a=n.get("query")||"",s=n.get("sex")||"",i=n.getAll("centuries")||[];var j=function(e){var t="".concat(e);return i.includes(t)?i.filter((function(e){return e!==t})):[].concat(Object(g.a)(i),[t])};return Object(o.jsxs)("nav",{className:"panel",children:[Object(o.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(o.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:Object.keys(w).map((function(e){return Object(o.jsx)(r.b,{to:{search:y(n,{sex:w[e]||null})},className:l()({"is-active":s===w[e]}),children:e},e)}))}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("p",{className:"control has-icons-left",children:[Object(o.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:a,onChange:function(e){!function(e){var t=y(n,e);c(t)}({query:e.target.value||null})}}),Object(o.jsx)("span",{className:"icon is-left",children:Object(o.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(o.jsx)("div",{className:"level-left",children:L.map((function(e){return Object(o.jsx)(r.b,{"data-cy":"century",className:l()("button","mr-1",{"is-info":i.includes("".concat(e))}),to:{search:y(n,{centuries:j(e)})},children:e},e)}))}),Object(o.jsx)("div",{className:"level-right ml-4",children:Object(o.jsx)(r.b,{"data-cy":"centuryALL",className:l()("button","is-success",{"is-outlined":!!i.length}),to:{search:y(n,{centuries:null})},children:"All"})})]})}),Object(o.jsx)("div",{className:"panel-block",children:Object(o.jsx)("a",{className:"button is-link is-outlined is-fullwidth",href:"#/people",children:"Reset all filters"})})]})},F=n(6),A=function(e){return e.textDanger="has-text-danger",e.backgroundWarning="has-background-warning",e}({}),E=function(e,t){return"".concat(e.toLowerCase().replace(/\s/g,"-"),"-").concat(t)},P=function(e){var t=e.person,n=e.selectedUser,c=t.name,a=t.sex,s=t.born,i=t.died,j=t.mother,d=t.father,b=t.motherName,u=t.fatherName,h=E(c,s);return Object(o.jsxs)("tr",{"data-cy":"person",className:l()(Object(F.a)({},A.backgroundWarning,h===n)),children:[Object(o.jsx)("td",{children:Object(o.jsx)(r.c,{to:"../".concat(h),className:l()(Object(F.a)({},A.textDanger,"f"===a)),children:c})}),Object(o.jsx)("td",{children:a}),Object(o.jsx)("td",{children:s}),Object(o.jsx)("td",{children:i}),Object(o.jsxs)("td",{children:[!b&&"-",j&&Object(o.jsx)(r.b,{to:"../".concat(E(j.name,j.born)),className:A.textDanger,children:j.name}),b&&!j&&Object(o.jsx)(o.Fragment,{children:b})]}),Object(o.jsxs)("td",{children:[!u&&"-",d&&Object(o.jsx)(r.b,{to:"../".concat(E(d.name,d.born)),children:d.name}),u&&!d&&Object(o.jsx)(o.Fragment,{children:u})]})]})},R=function(e){var t=e.persons,n=Object(s.useState)(t),c=Object(O.a)(n,2),i=c[0],j=c[1],d=Object(a.r)().personURL,b=Object(r.d)(),u=Object(O.a)(b,1)[0],h=u.get(S.Query)||"",x=u.getAll(S.Centuries)||[],m=u.get(S.Sex)||"",f=u.get(S.Sort)||"",p=u.get(S.Order)||"";return Object(s.useEffect)((function(){var e=Object(g.a)(t);h&&(e=e.filter((function(e){var t=e.name,n=e.motherName,c=e.fatherName;return!h||(t.toLowerCase().includes(h)||(null===n||void 0===n?void 0:n.toLowerCase().includes(h))||(null===c||void 0===c?void 0:c.toLowerCase().includes(h)))}))),m&&(e=e.filter((function(e){return e.sex===m}))),x.length&&(e=e.filter((function(e){var t="".concat(Math.ceil(e.born/100));return x.includes(t)}))),f&&(e=e.sort((function(e,t){return"name"===f||"sex"===f?p?t[f].localeCompare(e[f]):e[f].localeCompare(t[f]):"born"===f||"died"===f?p?t[f]-e[f]:e[f]-t[f]:0}))),j(e)}),[u]),Object(o.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object.keys(k).map((function(e){return Object(o.jsx)("th",{children:Object(o.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e,Object(o.jsx)(r.b,{to:{search:(t=k[e],f&&p?"":f||p?f&&!p?y(u,{sort:t,order:"desc"}):"":y(u,{sort:t}))},children:Object(o.jsx)("span",{className:"icon",children:Object(o.jsx)("i",{className:l()("fas",{"fa-sort":f!==k[e],"fa-sort-up":f===k[e]&&!p,"fa-sort-down":f===k[e]&&p})})})})]})},e);var t})),Object(o.jsx)("th",{children:"Mother"}),Object(o.jsx)("th",{children:"Father"})]})}),Object(o.jsx)("tbody",{children:i.map((function(e){return Object(o.jsx)(P,{person:e,selectedUser:d},"".concat(e.name,"-").concat(e.born))}))})]})},U=function(e){return e.error="Something went wrong",e.warning="There are no people on the server",e.noError="",e}({}),_=function(){var e=Object(s.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(U.noError),a=Object(O.a)(r,2),i=a[0],l=a[1],j=Object(s.useState)(!0),d=Object(O.a)(j,2),b=d[0],u=d[1];Object(s.useEffect)((function(){(function(){return v.apply(this,arguments)})().then(c).catch((function(){return l(U.error)})).finally((function(){return u(!1)}))}),[]);var x=n.map((function(e){var t=Object(h.a)({},e);return t.father=n.find((function(t){return t.name===e.fatherName})),t.mother=n.find((function(t){return t.name===e.motherName})),t}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"title",children:"People Page"}),Object(o.jsx)("div",{className:"block",children:Object(o.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(o.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!i&&!b&&Object(o.jsx)(C,{})}),Object(o.jsx)("div",{className:"column",children:Object(o.jsxs)("div",{className:"box table-container",children:[b&&Object(o.jsx)(N,{}),i&&!b&&Object(o.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:U.error}),!x.length&&!i&&!b&&Object(o.jsx)("p",{"data-cy":"noPeopleMessage",children:U.warning}),!i&&!b&&Object(o.jsx)(R,{persons:x})]})})]})})]})},D=function(){return Object(o.jsx)("h1",{className:"title",children:"Page not found"})},M=function(){return Object(o.jsx)(r.a,{children:Object(o.jsx)(a.e,{children:Object(o.jsxs)(a.c,{path:"/",element:Object(o.jsx)(b,{}),children:[Object(o.jsx)(a.c,{index:!0,element:Object(o.jsx)(u,{})}),Object(o.jsx)(a.c,{path:"home",element:Object(o.jsx)(a.a,{to:".."})}),Object(o.jsx)(a.c,{path:"people",children:Object(o.jsx)(a.c,{path:":personURL?",element:Object(o.jsx)(_,{})})}),Object(o.jsx)(a.c,{path:"*",element:Object(o.jsx)(D,{})})]})})})};n(38),n(39);Object(c.createRoot)(document.getElementById("root")).render(Object(o.jsx)(M,{}))}},[[40,1,2]]]);
//# sourceMappingURL=main.b0d5d18a.chunk.js.map